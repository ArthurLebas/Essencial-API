################################################################################
# Fichier de test des routes HTTP de l'API
# Nécessite l'extension REST Client pour VSCode
# https://marketplace.visualstudio.com/items?itemName=humao.rest-client
################################################################################

@endpoint = http://localhost:3000/api
#@endpoint = https://essencial-api.herokuapp.com/api

### Test d'une route introuvable
GET {{ endpoint }}/ujnlkcsdcs

/////////////////////////////////////////////////
///////////////////   USER   ///////////////////
////////////////////////////////////////////////

### Test de la route connexion globale
POST {{ endpoint }}/connexion
Content-Type:application/json

{
    "email": "Beuve57@gmail.com",
    "password": "test"
}


### Test de la route pour récupérer tous les utilisateurs (avec leurs photos)
GET {{ endpoint }}/user
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwibmFtZSI6InRlc3QiLCJyZWdpb24iOm51bGwsImNyZWF0ZWRfYXQiOiIyMDIyLTA2LTIyVDEwOjQwOjMxLjU1NFoiLCJ1cGRhdGVkX2F0IjpudWxsLCJ0eXBlIjoiZWNvdmlsbGFnZSIsImlhdCI6MTY1NTkwMTgxNywiZXhwIjoxNjU1OTA1NDE3fQ.QJhAyrBOMsy0pEGXl16gQruT1SoDFJB55kw2Cr_XnP4

### Test de la route pour récupérer un utilisateur et sa photo
GET {{ endpoint }}/user/235
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicHNldWRvIjoiQXVyw6hsZTIxIiwiZGVzY3JpcHRpb24iOm51bGwsInJpZ2h0cyI6InVzZXIiLCJjcmVhdGVkX2F0IjoiMjAyMi0wNi0yMlQxODoyMjoyNy41MTRaIiwidXBkYXRlZF9hdCI6bnVsbCwidHlwZSI6InVzZXIiLCJpYXQiOjE2NTU5MjIyMjYsImV4cCI6MTY1NTkyNTgyNn0.J9hQh_ouMNY4TOQo3lPKbciY-Yheo4tUKI0H8nbhYzg

### Test de la route pour ajouter un nouvel utilisateur
POST {{ endpoint }}/user/create
Content-Type:application/json

{
    "email": "tni@yahoo.org",
    "first_name": "Tony",
    "last_name": "Williams",
    "pseudo": "drum1",
    "date_of_birth": "2021-10-29T02:58:12.923Z",
    "password": "test",
    "phone_number": "0677777777",
    "address": "77 rue du test",
    "region": "ile de france",
    "zip_code": "75829",
    "city": "Paris",
    "path": "https://images.sk-static.com/images/media/profile_images/artists/517366/huge_avatar"
}

### Test de la route pour supprimer un utilisateur
DELETE {{ endpoint }}/user/1
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInBzZXVkbyI6IkFybWFuY2UyNCIsInJpZ2h0cyI6InVzZXIiLCJjcmVhdGVkX2F0IjoiMjAyMi0wNi0yMFQxOTo0MjowNC43MDhaIiwidXBkYXRlZF9hdCI6bnVsbCwidHlwZSI6InVzZXIiLCJpYXQiOjE2NTU4MDYwMDAsImV4cCI6MTY1NTgwNzgwMH0.3Jq9CN5s9sNfhSvbdRmGv3v_s44iJxw1JigDfQaySmU

### Test de la route pour récupérer tout les amis d'un utilisateur
GET {{ endpoint }}/user/friends/1
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicHNldWRvIjoiQXVyw6hsZTIxIiwiZGVzY3JpcHRpb24iOiJib25qb3VyIG1vaSBjJ2VzdCBSb2JlcnQiLCJyaWdodHMiOiJ1c2VyIiwiY3JlYXRlZF9hdCI6IjIwMjItMDYtMjJUMTg6MjI6MjcuNTE0WiIsInVwZGF0ZWRfYXQiOiIyMDIyLTA2LTIzVDExOjI4OjUzLjMwNloiLCJ0eXBlIjoidXNlciIsImlhdCI6MTY1NTk4NTk2OCwiZXhwIjoxNjU1OTg5NTY4fQ.1FWBwk4uIROirW_dQEFjZ5v7YSYeQ8N2ZBcOljf61x8

### Test de la route pour récupérer tout les posts d'un utilisateur
GET {{ endpoint }}/user/posts/120
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInBzZXVkbyI6IkFybWFuY2UyNCIsInJpZ2h0cyI6InVzZXIiLCJjcmVhdGVkX2F0IjoiMjAyMi0wNi0yMFQxOTo0MjowNC43MDhaIiwidXBkYXRlZF9hdCI6bnVsbCwidHlwZSI6InVzZXIiLCJpYXQiOjE2NTU4MDYxNjIsImV4cCI6MTY1NTgwNzk2Mn0.vAtRy0_MmbYULr3T40tLgETcnAhQ-cvFMJsEBDU68sI

### Test de la route pour afficher tout les posts de tout les amis d'un utilisateurs
GET {{ endpoint }}/user/friends/posts/120
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTIsInBzZXVkbyI6IkFybWFuY2UyNCIsInJpZ2h0cyI6InVzZXIiLCJjcmVhdGVkX2F0IjoiMjAyMi0wNi0yMFQxOTo0MjowNC43MDhaIiwidXBkYXRlZF9hdCI6bnVsbCwidHlwZSI6InVzZXIiLCJpYXQiOjE2NTU4MDYxNjIsImV4cCI6MTY1NTgwNzk2Mn0.vAtRy0_MmbYULr3T40tLgETcnAhQ-cvFMJsEBDU68sI

### Test de la route pour update un utilisateur
PATCH {{ endpoint }}/user
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6OSwicHNldWRvIjoiTWF0dGhpYXM2OSIsImRlc2NyaXB0aW9uIjpudWxsLCJyaWdodHMiOiJ1c2VyIiwiY3JlYXRlZF9hdCI6IjIwMjItMDYtMjJUMTQ6MTA6NDYuNzI4WiIsInVwZGF0ZWRfYXQiOm51bGwsInR5cGUiOiJ1c2VyIiwiaWF0IjoxNjU1OTk2NDc5LCJleHAiOjE2NTYwMDAwNzl9.P3rLCAOyio2Hs9Cbc43EzMhw0KZi4RCZJZpxpxHt4jQ

{
    "first_name": "Robert",
    "region": "Tatooine"
}

### Test de la route pour ajouter un amis
GET {{ endpoint }}/user/friends/add/14
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicHNldWRvIjoiQXVyw6hsZTIxIiwiZGVzY3JpcHRpb24iOiJib25qb3VyIG1vaSBjJ2VzdCBSb2JlcnQiLCJyaWdodHMiOiJ1c2VyIiwiY3JlYXRlZF9hdCI6IjIwMjItMDYtMjJUMTg6MjI6MjcuNTE0WiIsInVwZGF0ZWRfYXQiOiIyMDIyLTA2LTIzVDExOjI4OjUzLjMwNloiLCJ0eXBlIjoidXNlciIsImlhdCI6MTY1NTk4NTk2OCwiZXhwIjoxNjU1OTg5NTY4fQ.1FWBwk4uIROirW_dQEFjZ5v7YSYeQ8N2ZBcOljf61x8

### Test de la route pour supprimer un amis
DELETE {{ endpoint }}/user/friends/delete/11
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwicHNldWRvIjoiQXVyw6hsZTIxIiwiZGVzY3JpcHRpb24iOm51bGwsInJpZ2h0cyI6InVzZXIiLCJjcmVhdGVkX2F0IjoiMjAyMi0wNi0yMlQxODoyMjoyNy41MTRaIiwidXBkYXRlZF9hdCI6bnVsbCwidHlwZSI6InVzZXIiLCJpYXQiOjE2NTU5ODM2NDQsImV4cCI6MTY1NTk4NzI0NH0.WyrhWA8P54e5fMbwt57BHczKFxINrtj1tiPe5VIwdZQ

////////////////////////////////////////////////
///////////////////   POST   //////////////////
///////////////////////////////////////////////

### Test de la route pour récupérer tout les posts
GET {{ endpoint }}/post

### Test de la route pour créer un nouveau post
POST {{ endpoint }}/post/create
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwicHNldWRvIjoiQmV1dmU4MCIsImRlc2NyaXB0aW9uIjpudWxsLCJyaWdodHMiOiJ1c2VyIiwiY3JlYXRlZF9hdCI6IjIwMjItMDYtMjJUMTg6MjI6MjcuNTI1WiIsInVwZGF0ZWRfYXQiOm51bGwsInR5cGUiOiJ1c2VyIiwiaWF0IjoxNjU2MDczMzY0LCJleHAiOjE2NTYwNzY5NjR9.es_eht1mYy-vg-ouySGVnoVOJ-kztc51zg-u0Ek0Zms

{
   "content": "Le fonctionnement du composteur est assez simple. Le compost se forme par l'action de micro-organismes et par un processus de fermentation. Sans oxygène et sans eau, aucune forme de vie n'est possible. Quand le compost Est-il mûr ? Au bout de 8 à 12 mois en moyenne, lorsque les déchets se sont transformés en une terre grumeleuse, friable, brun foncé, le compost est prêt à être utilisé. C'est le compost mûr, ressemblant au terreau et dégageant une odeur de sous-bois, qui contient un effet amendant et fertilisant.",
   "title": "Comment fonctionne un bac à compost ?" ,
   "path": "https://trucmania.ouest-france.fr/wp-content/uploads/2020/09/bac-a-compost-en-palettes-%C2%A9-Nature-et-construction.jpg",
   "category_1": "Potager",
   "category_2": "Gestion des déchêts"
}

### Test de la route pour supprimer un post
DELETE {{ endpoint }}/post/1070
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwicHNldWRvIjoiQmV1dmU4MCIsImRlc2NyaXB0aW9uIjpudWxsLCJyaWdodHMiOiJ1c2VyIiwiY3JlYXRlZF9hdCI6IjIwMjItMDYtMjJUMTg6MjI6MjcuNTI1WiIsInVwZGF0ZWRfYXQiOm51bGwsInR5cGUiOiJ1c2VyIiwiaWF0IjoxNjU2MDczMzY0LCJleHAiOjE2NTYwNzY5NjR9.es_eht1mYy-vg-ouySGVnoVOJ-kztc51zg-u0Ek0Zms

### Test de la route pour afficher un post
GET {{ endpoint }}/post/1013
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MiwicHNldWRvIjoiQmV1dmU4MCIsImRlc2NyaXB0aW9uIjpudWxsLCJyaWdodHMiOiJ1c2VyIiwiY3JlYXRlZF9hdCI6IjIwMjItMDYtMjJUMTg6MjI6MjcuNTI1WiIsInVwZGF0ZWRfYXQiOm51bGwsInR5cGUiOiJ1c2VyIiwiaWF0IjoxNjU2MDczMzY0LCJleHAiOjE2NTYwNzY5NjR9.es_eht1mYy-vg-ouySGVnoVOJ-kztc51zg-u0Ek0Zms

### Test de la route pour afficher tout les tuto
GET {{ endpoint }}/post/tuto

///////////////////////////////////////////////////////
///////////////////   ECO VILLAGE   ///////////////////
//////////////////////////////////////////////////////

### Test de la route pour récupérer tout les eco village
GET {{ endpoint }}/ecovillage

### Test de la route pour récupérer un eco village
GET {{ endpoint }}/ecovillage/8
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NywiZW1haWwiOiJ0ZVN0aGtuanRAZXhhbXBsZS5jb20iLCJuYW1lIjoidGVzdCIsImRlc2NyaXB0aW9uIjoidGVzdCBkZXNjcmlwdGlvbiIsImFkZHJlc3MiOiIxMiBydWUgZHUgdGVzdCIsInppcF9jb2RlIjoiNzg5NDMiLCJjaXR5IjoidGVzdCIsImZpcnN0X25hbWVfbWFuYWdlciI6IkJlcm5hcmRvIiwibGFzdF9uYW1lX21hbmFnZXIiOiJEZWxhdmVpZ2EiLCJkYXRlX29mX2JpcnRoX21hbmFnZXIiOm51bGwsInBhc3N3b3JkIjoidGVzdCIsInBob25lX251bWJlciI6IjA3NjUzODg1NjEiLCJ3ZWJzaXRlIjpudWxsLCJjcmVhdGVkX2F0IjoiMjAyMi0wNi0yMFQxNTowNDo1Ny4zODdaIiwidXBkYXRlZF9hdCI6bnVsbCwiaWF0IjoxNjU1NzQ2NzI4LCJleHAiOjE2NTU3NDg1Mjh9.XngUVIbpyM6eQFYc6-pCr7DTUtKvjLJLwD0T3UlKa6E

### Test de la route pour créer un éco village
POST {{ endpoint }}/ecovillage/create
Content-Type:application/json

{
    "email": "accueil@ecolectif.com",
    "name": "Ecovillage Sainte Camelle",
    "description": "A mesure que le groupe s’étoffe, nous souhaitons co-construire et préserver les bases d’une véritable « écologie relationnelle » auxquelles nous avons travaillé en priorité dès le départ. Ainsi, nous avons créé un parcours d’inclusion progressif et personnalisé afin de donner à tous le temps de se situer, de vérifier la place de chacun dans le projet. Nous croyons qu’il est essentiel de se doter de moyens concrets pour révéler l’intelligence collective et donner au groupe une stabilité relationnelle permettant de dépasser les difficultés du chemin. Pour cela, nous nous réunissons régulièrement depuis mars 2009, apprenons à fonctionner en cercle en améliorant nos processus de décision, partageons notre expérience et nos compétences. Nous avons écrit ensemble une charte. Forts de ces éléments clés, nous souhaitons accueillir d’autres personnes qui se sentent mobilisées par cette vision, ces valeurs et ces choix. Nous prévoyons un groupe d’une vingtaine de foyers à terme. Nous tendons vers un habitat auto-construit, des bâtiments écologiques et sains, des économies d’énergie, dans un environnement cohérent. Pour nous, l’auto-éco-construction est d’abord un état d’esprit ouvert à l’entraide, à la créativité, à l’utilisation des matériaux locaux et au recyclage de matériaux usagés : - Utilisation de terre, de pierres, de bois, de paille et autres végétaux produits localement - Utilisation de matériaux recyclables ou réutilisables (pneus, bouteilles en verre, textiles divers) - Redécouverte des techniques traditionnelles du monde (maisons individuelles passives) - Accès à des réseaux d’artistes et d’artisans constructeurs - Organisation de chantiers participatifs, formateurs et festifs",
    "first_name_manager": "Thomas",
    "last_name_manager": "Baker",
    "password": "test",
    "address": "Association les Chemins d'Ecolectif Voie N°3 du Bernadaou Le Paoulé",
    "region": "Occitanie",
    "city": "Gensac de Boulogne",
    "website": "https://ecolectif.jimdofree.com/",
    "zip_code":"31350",
    "phone_number": "09 84 31 50 38",
    "path": "https://image.jimcdn.com/app/cms/image/transf/dimension=1920x400:format=jpg/path/s5f8fb5b2a2c616b4/image/ic42e56a91b7b17e8/version/1525713911/image.jpg"
}

### Test de la route pour supprimer un eco village
DELETE {{ endpoint }}/ecovillage/7
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NywibmFtZSI6InRlc3QiLCJyZWdpb24iOm51bGwsImNyZWF0ZWRfYXQiOiIyMDIyLTA2LTIxVDE4OjEzOjUyLjc1MloiLCJ1cGRhdGVkX2F0IjpudWxsLCJ0eXBlIjoiZWNvdmlsbGFnZSIsImlhdCI6MTY1NTgzNTI3OSwiZXhwIjoxNjU1ODM3MDc5fQ.k0vwodk1NImuVNUeCsoDEc6TYGVNPLwezGDr1sxL2KE

### Test de la route pour modifier un éco village
PATCH {{ endpoint }}/ecovillage/11
Content-Type:application/json
Authorization: jwt eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwibmFtZSI6InRlc3QiLCJyZWdpb24iOiJQaWNhcmRpZSIsImNyZWF0ZWRfYXQiOiIyMDIyLTA2LTIyVDE0OjEyOjA2LjYyN1oiLCJ1cGRhdGVkX2F0IjpudWxsLCJ0eXBlIjoiZWNvdmlsbGFnZSIsImlhdCI6MTY1NjA1OTkwOCwiZXhwIjoxNjU2MDYzNTA4fQ.HmBWWJipnXo_MZzulDq29f8NB2KVXhDOc7Skm4PyDYM

{
    "date_of_birth_manager": "1977-07-18T20:31:05.469Z",
    "name": "Ecovil city",
    "region": "Abou Dabi"
}


